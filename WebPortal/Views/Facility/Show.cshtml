@using DataAccess.Models
@model DataAccess.Models.Facility

@{
    ViewBag.Title = "Faciliteit bekijken";
    Layout = "_Layout";
}
<a asp-action="Index" class="inline-block w-auto px-5 py-2 text-sm text-gray-700 transition-colors duration-200 bg-white border rounded-lg gap-x-2 dark:hover:bg-gray-800 dark:bg-gray-900 hover:bg-gray-100 dark:text-gray-200 dark:border-gray-700">
    <svg class="w-5 h-5 rtl:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 15.75L3 12m0 0l3.75-3.75M3 12h18" />
    </svg>
    <span>Terug</span>
</a>
<div class="flex items-center space-x-4">
    <h2 class="text-2xl font-semibold">Faciliteit details</h2>
    <form id="deleteform" method="post" asp-action="Delete" asp-route-id="@Model.Id" onsubmit="return confirmDeletion()">
        <input type="hidden" name="_method" value="DELETE">
        <button type="submit" class="underline">Verwijder</button>
    </form>
    
</div>
<p>ID: @Model.Id</p>
<p>Naam: @Model.Name</p>
<p>Beschrijving: @Model.Description</p>
<p>Type: @Model.Type</p>
<p>Icoontje:</p>
<i class="ti ti-@Model.IconName text-4xl"></i>
<p>Huidige locatie:</p>
<div id="map" class="h-[20vh] w-[20vw]"></div>

@section Scripts
{
    <script>
        let markerLocation = L.latLng(@Model.Latitude.ToString(System.Globalization.CultureInfo.InvariantCulture), @Model.Longitude.ToString(System.Globalization.CultureInfo.InvariantCulture));
        let map = L.map('map', {
            center: markerLocation,
            zoom: 18
        });
        L.tileLayer('@Html.Raw("https://api.mapbox.com/styles/v1/thieme/clu785gfh00y201qshhlscngq/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoidGhpZW1lIiwiYSI6ImNsdTF6bDI3YTByZGMya24wNzgxM3lnaW8ifQ.es_E8PCEaZhsaYiGsl8q5A")', {
            maxZoom: 19,
        }).addTo(map);

        let icon = L.divIcon({
            html: `<i class="ti ti-@Model.IconName text-lg"></i>`,
            className: 'facility-icon',
            iconSize: [35, 35],
            iconAnchor: [15, 15],
            popupAnchor: [0, -15]
        });
        
        let marker = L.marker(markerLocation, {
            title: '@Model.Name',
            icon: icon
        });
        marker.addTo(map).bindPopup(popupContent);
        
        function confirmDeletion() {
            return confirm('Weet u zeker dat u deze faciliteit wilt verwijderen?');
        }
    </script>
    
    
}


